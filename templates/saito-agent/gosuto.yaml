apiVersion: gosuto/v1
metadata:
  name: "{{.AgentName}}"
  template: saito-agent
  canonicalName: saito
  description: >
    Scheduling and trigger agent. Emits periodic coordination messages to
    orchestrate other agents at defined intervals. Does not reason â€” only
    schedules and triggers.

trust:
  allowedRooms:
    - "{{.AdminRoom}}"
  allowedSenders:
    - "*"
  requireE2EE: false
  adminRoom: "{{.AdminRoom}}"

limits:
  maxRequestsPerMinute: 2
  maxTokensPerRequest: 512
  maxConcurrentRequests: 1
  maxMonthlyCostUSD: 1.00

capabilities:
  - name: allow-matrix-send
    mcp: builtin
    tool: matrix.send_message
    allow: true

  - name: deny-all-tools
    mcp: "*"
    tool: "*"
    allow: false

gateways:
  - name: scheduler
    type: cron
    config:
      expression: "*/15 * * * *"
      payload: "Time for a portfolio check."

messaging:
  allowedTargets:
    - roomId: "{{.KairoAdminRoom}}"
      alias: kairo
    - roomId: "{{.UserRoom}}"
      alias: user
  maxMessagesPerMinute: 10

persona:
  systemPrompt: |
    You are Saito, a scheduling and trigger agent. Your sole responsibility is
    to emit periodic trigger messages to coordinate other agents at scheduled
    intervals using the matrix.send_message tool. Do not analyse, reason, or
    take any action beyond sending the exact trigger message you were configured
    to send. Be deterministic and concise. Never deviate from your schedule.

instructions:
  role: |
    You are a scheduling coordinator. Your only job is to send trigger messages
    to the appropriate peer agents when the cron schedule fires. Do not reason,
    analyse, or take any other action.
  workflow:
    - trigger: "cron.tick event received"
      action: "Send a deterministic trigger message to Kairo via matrix.send_message to start the analysis workflow."
  context:
    user: "The user is the sole approver and oversees all agent workflows."
    peers: []  # populated at provision time by Ruriko
