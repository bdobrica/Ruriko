# Ruriko Configuration
# Copy this file to .env and fill in your values

# Database
DATABASE_PATH=./ruriko.db

# Matrix Configuration
MATRIX_HOMESERVER=https://matrix.example.com
MATRIX_USER_ID=@ruriko:example.com
MATRIX_ACCESS_TOKEN=your_access_token_here

# Comma-separated list of room IDs where Ruriko accepts commands
MATRIX_ADMIN_ROOMS=!adminroom:example.com,!opsroom:example.com

# Optional: comma-separated list of Matrix user IDs allowed to send commands
# When empty, any room member can execute commands
# MATRIX_ADMIN_SENDERS=@alice:example.com,@bob:example.com

# Optional: Master encryption key for secrets (32-byte key encoded as 64 hex chars)
# Generate with: openssl rand -hex 32
RURIKO_MASTER_KEY=your_64_char_hex_string_here

# Docker Runtime (optional)
# Set DOCKER_ENABLE=true to enable container lifecycle management
DOCKER_ENABLE=false
DOCKER_NETWORK=ruriko
# How often to reconcile container state with the DB (e.g. 30s, 1m)
RECONCILE_INTERVAL=30s

# Matrix Identity Provisioning (optional)
# Set MATRIX_PROVISIONING_ENABLE=true to allow Ruriko to automatically create
# Matrix accounts for agents via /ruriko agents matrix register <name>.
MATRIX_PROVISIONING_ENABLE=false

# Homeserver type: "tuwunel" (default), "synapse", "generic" (open registration), or "manual" (no auto-provision)
# "tuwunel" uses the Matrix client-server registration API with an optional registration token.
# "synapse" uses the Synapse shared-secret admin API (requires MATRIX_SHARED_SECRET).
MATRIX_HOMESERVER_TYPE=tuwunel

# Tuwunel registration token (used when MATRIX_HOMESERVER_TYPE=tuwunel).
# Set this to a random string, register all accounts, then clear it to lock down registration.
# Generate with: openssl rand -hex 16
# TUWUNEL_REGISTRATION_TOKEN=your_registration_token

# Synapse shared-secret registration (required when MATRIX_HOMESERVER_TYPE=synapse)
# Must match registration_shared_secret in your Synapse homeserver.yaml.
# Generate with: openssl rand -hex 32
# MATRIX_SHARED_SECRET=your_synapse_registration_shared_secret

# Optional suffix appended to agent Matrix usernames.
# e.g. setting "-agent" turns agent "weatherbot" into "@weatherbot-agent:example.com"
# MATRIX_AGENT_USERNAME_SUFFIX=

# Gosuto templates
# Path to the directory containing agent template sub-directories (each with a gosuto.yaml).
# Defaults to ./templates relative to the working directory.
TEMPLATES_DIR=./templates

# Optional: Matrix audit room (room ID) where Ruriko posts human-friendly audit event summaries.
# Leave empty to disable.
# MATRIX_AUDIT_ROOM=!auditroom:example.com

# Health / status HTTP server (optional)
# Set to a TCP address to enable. Leave empty to disable.
# Example: :8080  or  127.0.0.1:8080
HTTP_ADDR=:8080

# Logging
# LOG_LEVEL:  debug | info | warn | error  (default: info)
LOG_LEVEL=info
# LOG_FORMAT: text | json  (default: text; use json in production)
LOG_FORMAT=text

# ---------------------------------------------------------------------------
# Docker Compose only — local Tuwunel homeserver (default)
# ---------------------------------------------------------------------------
# Server name for the Tuwunel homeserver. Must match the domain part of MXIDs.
TUWUNEL_SERVER_NAME=localhost
# Registration token for initial account creation. Clear after setup.
# TUWUNEL_REGISTRATION_TOKEN=
# Set to true only during initial account setup, then set back to false.
TUWUNEL_ALLOW_REGISTRATION=false

# ---------------------------------------------------------------------------
# Docker Compose only — local Synapse homeserver (alternative)
# ---------------------------------------------------------------------------
# Uncomment and configure if using Synapse instead of Tuwunel.
# SYNAPSE_SERVER_NAME=localhost

# Host and port binding for the Ruriko health endpoint when using docker-compose.
HTTP_ADDR_HOST=127.0.0.1
HTTP_ADDR_PORT=8080
