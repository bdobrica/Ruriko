# Ruriko Configuration
# Copy this file to examples/docker-compose/.env and fill in your values.
# See OPERATIONS.md for a step-by-step setup guide.

# Database
DATABASE_PATH=./ruriko.db

# Matrix Configuration
MATRIX_HOMESERVER=http://tuwunel:8008
MATRIX_USER_ID=@ruriko:localhost
MATRIX_ACCESS_TOKEN=your_access_token_here

# Comma-separated list of room IDs where Ruriko accepts commands
MATRIX_ADMIN_ROOMS=!adminroom:localhost

# Optional: comma-separated list of Matrix user IDs allowed to send commands
# When empty, any room member can execute commands
MATRIX_ADMIN_SENDERS=@bogdan:localhost

# Master encryption key for secrets (32-byte key encoded as 64 hex chars)
# Generate with: openssl rand -hex 32
RURIKO_MASTER_KEY=your_64_char_hex_string_here

# Docker Runtime
# Set DOCKER_ENABLE=true to enable container lifecycle management for agents
DOCKER_ENABLE=true
DOCKER_NETWORK=ruriko-net
# How often to reconcile container state with the DB (e.g. 30s, 1m)
RECONCILE_INTERVAL=30s

# Default container image used when creating agents via chat
DEFAULT_AGENT_IMAGE=gitai:latest

# ---------------------------------------------------------------------------
# Kuze — one-time secret entry via browser
# ---------------------------------------------------------------------------
# Base URL where Ruriko's HTTP server is reachable from a browser.
# When set, /ruriko secrets set generates one-time browser links instead of
# accepting inline base64 values. Leave empty to disable Kuze (dev mode).
KUZE_BASE_URL=http://localhost:8080
# How long one-time links remain valid (Go duration, e.g. 10m, 1h).
KUZE_TTL=10m

# ---------------------------------------------------------------------------
# Matrix Identity Provisioning
# ---------------------------------------------------------------------------
# Set to true to allow Ruriko to automatically create Matrix accounts for agents.
MATRIX_PROVISIONING_ENABLE=true
# Homeserver type: "tuwunel" (default), "synapse", "generic", or "manual"
MATRIX_HOMESERVER_TYPE=tuwunel
# Tuwunel registration token — set during initial setup, clear after.
# Generate with: openssl rand -hex 16
TUWUNEL_REGISTRATION_TOKEN=
# Synapse shared-secret (only if using Synapse)
# MATRIX_SHARED_SECRET=
# Optional suffix appended to agent Matrix usernames (e.g. "-agent")
# MATRIX_AGENT_USERNAME_SUFFIX=

# Gosuto templates directory
TEMPLATES_DIR=./templates

# Optional: Matrix audit room for human-friendly event summaries
# MATRIX_AUDIT_ROOM=!auditroom:localhost

# Health / status HTTP server address
HTTP_ADDR=:8080

# Logging
LOG_LEVEL=info
# Use "text" for local dev, "json" for production
LOG_FORMAT=text

# ---------------------------------------------------------------------------
# Docker Compose only — local Tuwunel homeserver
# ---------------------------------------------------------------------------
# Server name for the Tuwunel homeserver.
# Must match the domain part of all MXIDs (e.g., @ruriko:localhost → localhost).
TUWUNEL_SERVER_NAME=localhost
# Bind address for Tuwunel on the host (for your Matrix client to connect)
TUWUNEL_HOST=127.0.0.1
TUWUNEL_PORT=8008
# Set to true only during initial account setup, then set back to false.
TUWUNEL_ALLOW_REGISTRATION=false

# Host bind for Ruriko health/Kuze endpoint
HTTP_ADDR_HOST=127.0.0.1
HTTP_ADDR_PORT=8080
